{% extends "materias_primas/layout.html" %}

{% block content %}
<div class="container">
    <table class="table align-middle mb-0 bg-white m-3 mb-5">
        <thead class="bg-light">
        <tr>
            <th>Tipo de Produccion</th>
            <th>Cantidad</th>
            <th>Costo total</th>

            {% if user.is_superuser %}
            <th>Acciones</th>
            {%endif%}

        </tr>
        </thead>

        {% if produccion%}

        <tbody>

            {% for prod in produccion %}

            <tr>
                <td>
                    
                <div class="d-flex align-items-center">
                    
                    <img
                        src="https://static.vecteezy.com/system/resources/previews/002/565/686/non_2x/productivity-and-production-capacity-icon-vector.jpg"
                        alt="NO-IMG"
                        style="width: 45px; height: 45px"
                        class="rounded-circle"
                        />
                        <p class="fw-normal mb-1 fw-bold" >{{prod.nombre}}</p>
                </div>
                
                </td>
                
                <td>
                    <p class="fw-normal mb-1">{{prod.produccion_cantidad}}</p>
                </td>

                <td>
                    <p class="fw-normal mb-1">$ {{prod.produccion_total}}</p>
                </td>

                {% if user.is_superuser %}

                <td>

                <form action="{% url 'finalizar_todos_produccion' %}"  method="post" style="display: inline;" enctype="multipart/form-data">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-info btn-sm btn-rounded">Finalizar</button>
                </form>

                <form action="{% url 'eliminar_produccion' %}" method="post" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-sm btn-rounded btn-danger">Eliminar</button>
                </form>

            </td>

            {%endif%}

            </tr>

            {%endfor%}

        </tbody>
    </table> 
</div>

{%else%}

    <p class="fw-normal mb-1">{{ mensaje }}</p>

{%endif%}

{% if user.is_superuser %}
<div class="d-flex flex-column align-items-center">
    <div class="row mb-4">
        <div class="form-outline w-100 text-center">
            <label class="form-label text-center fw-bold mb-1 ml-2" for="cantidad">INGRESE LA CANTIDAD </label>
            {% for prod in produccion %}
            <form action="{% url 'agregar_materias_produccion' prod.id%}" method="post" style="display: inline;" enctype="multipart/form-data">
                {% csrf_token %}
                <input type="number" id="cantidad" name="cantidad" class="form-control" />
                <p class="fw-normal mb-1 fw-bold mt-2">SELECCIONE EL TIPO DE PRODUCCION</p>
                <select id="produccion_id" name="produccion_id" class="form-select">
                    {% for prod in produccion %}
                        <option value="{{ prod.id }}">{{ prod.nombre }}</option>
                    {% endfor %}
                </select>
                <button type="submit" class="btn btn-success btn-sm btn-rounded mt-2">AGREGAR A PRODUCCION</button>
            </form>
            {% endfor %}
        </div>
       
    </div>

    
    {% if messages %}
    {% for message in messages %}
        <div class="alert {{ message.tags }} alert-dismissible fade show text-center w-25" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endfor %}
{% endif %}
</div>

{%endif%}

{% endblock %}



